import{e as S,f,r,h as d,i as p,k as y,l as A,j as g,S as N,A as x}from"./index-CS1P21SE.js";const o=()=>({get:e=>{const a=sessionStorage.getItem(e);return a?JSON.parse(a):{}},set:(e,a)=>{sessionStorage.setItem(e,JSON.stringify(a))}});function O(){const e=S(),a=e.location.pathname+e.location.search,{getCurrentRoute:u}=f(),s=u(),t=a+"-schema",[l,c]=r.useState(o().get(t)),[m,h]=r.useState(!1),i=d(p,{cacheKey:t,manual:!0,loadingDelay:700,onSuccess(n){if(m){c({}),c(n.data),o().set(t,n.data);return}JSON.stringify(n.data)!=JSON.stringify(o().get(t))&&(c(n.data),o().set(t,n.data))}});return y("refreshAmisPage",()=>(h(!0),i.runAsync(a,s==null?void 0:s.page_sign))),A(()=>i.run(a,s==null?void 0:s.page_sign)),g(N,{spinning:i.loading,className:"w-full",style:{minHeight:i.loading?"500px":""},children:g(x,{schema:l})})}export{O as default};
